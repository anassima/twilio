#{extends 'main.html' /}
#{set title:'Home' /}

<h1>Home</h1>

<a href="@{Application.getCalls()}">View calls from Twilio API (and persist locally)</a>
<br />
<a href="@{Application.startJob()}">Start spam calling job</a>
<br />
<a href="@{Application.stopJob()}">Stop spam calling job</a>
<br />
<br />

<form action="@{Application.callNumber()}" method="GET">
    <input type="text" name="number" value="9173799794" />
    <input type="submit" value="Call now!" />
</form>

<br />

<table>
    <thead>
        <th>ID</th>
        <th>Status</th>
        <th>To</th>
        <th>From</th>
        <th>Created</th>
        <th>Updated</th>
        <th>Started</th>
        <th>Ended</th>
        <th>Duration</th>
    </thead>
    <tbody>
        #{list items:outgoingCalls, as:'outgoingCall'}
        <tr>
            <td>${outgoingCall.cid}</td>
            <td>${outgoingCall.status}</td>
            <td>${outgoingCall.callTo}</td>
            <td>${outgoingCall.callFrom}</td>
            <td>${outgoingCall.created}</td>
            <td>${outgoingCall.updated}</td>
            <td>${outgoingCall.start}</td>
            <td>${outgoingCall.end}</td>
            <td>${outgoingCall.duration}</td>
        </tr>
        #{/list}
    </tbody>
</table>